{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { required, minLength } from 'vuelidate/lib/validators';\nimport customValidator from '@/helper/validator';\nimport storageService from '@/service/storageService';\nimport userService from '@/service/userService';\nexport default {\n  data() {\n    return {\n      user: {\n        name: '',\n        telephone: '',\n        password: ''\n      },\n      validation: null\n    };\n  },\n\n  validations: {\n    user: {\n      name: {},\n      telephone: {\n        required,\n        telephone: customValidator.telephoneValidator\n      },\n      password: {\n        required,\n        minLength: minLength(6)\n      }\n    }\n  },\n  methods: {\n    validationState(name) {\n      // 这里是es6 机构赋值\n      const {\n        $dirty,\n        $error\n      } = this.$v.user[name];\n      return $dirty ? !$error : null;\n    },\n\n    register() {\n      // 验证数据\n      this.$v.user.$touch();\n\n      if (this.$v.user.$anyError) {\n        return;\n      } // 请求api\n\n\n      userService.register(this.user).then(res => {\n        // 保存token\n        this.$store.commit('userModule/SET_TOKEN', token);\n        storageService.set(storageService.USER_TOKEN, res.data.data.token);\n        userService.info().then(response => {\n          //保存用户信息\n          storageService.set(storageService.USER_INFO, JSON.stringify(response.data.data.user)); // 跳转主页\n\n          this.$router.replace({\n            name: 'home'\n          });\n        });\n      }).catch(err => {\n        this.$bvToast.toast(err.response.data.msg, {\n          title: '数据验证错误',\n          variant: 'danger',\n          solid: true\n        });\n      });\n      console.log('register');\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC;QACAC,QADA;QAEAC,aAFA;QAGAC;MAHA,CADA;MAMAC;IANA;EAQA,CAVA;;EAWAC;IACAL;MACAC,QADA;MAIAC;QACAI,QADA;QAEAJ;MAFA,CAJA;MAQAC;QACAG,QADA;QAEAC;MAFA;IARA;EADA,CAXA;EA2BAC;IACAC;MACA;MACA;QAAAC;QAAAC;MAAA;MACA;IACA,CALA;;IAMAC;MACA;MACA;;MACA;QACA;MACA,CALA,CAMA;;;MACAC;QACA;QACA;QACAC;QACAD;UACA;UACAC,sFAFA,CAGA;;UACA;YAAAb;UAAA;QACA,CALA;MAMA,CAVA,EAUAc,KAVA,CAUAC;QACA;UACAC,eADA;UAEAC,iBAFA;UAGAC;QAHA;MAKA,CAhBA;MAiBAC;IACA;;EA/BA;AA3BA","names":["data","user","name","telephone","password","validation","validations","required","minLength","methods","validationState","$dirty","$error","register","userService","storageService","catch","err","title","variant","solid","console"],"sourceRoot":"src/views/register","sources":["Register.vue"],"sourcesContent":["<template>\n  <div class=\"register\">\n    <b-row class=\"mt-5\">\n      <b-col md=\"8\" offset-md=\"2\" lg=\"6\" offset-lg=\"3\">\n    <b-card title=\"用户注册\">\n    <b-form>\n      <b-form-group label=\"姓名:\">\n        <b-form-input\n          v-model=\"$v.user.name.$model\"\n          type=\"text\"\n          placeholder=\"输入您的名称（选填）\"\n        ></b-form-input>\n      </b-form-group>\n      <b-form-group label=\"手机号:\">\n        <b-form-input\n          v-model=\"$v.user.telephone.$model\"\n          type=\"number\"\n          placeholder=\"输入手机号\"\n          :state=\"validationState('telephone')\"\n        ></b-form-input>\n        <b-form-invalid-feedback :state=\"validationState('telephone')\">\n          手机号不符合要求\n        </b-form-invalid-feedback>\n      </b-form-group>\n      <b-form-group label=\"密码:\">\n        <b-form-input\n          v-model=\"$v.user.password.$model\"\n          type=\"password\"\n          placeholder=\"输入密码\"\n          :state=\"validationState('password')\"\n        ></b-form-input>\n        <b-form-invalid-feedback :state=\"validationState('password')\">\n          密码必须大于6位\n        </b-form-invalid-feedback>\n      </b-form-group>\n      <b-form-group>\n        <b-button @click=\"register\" variant=\"outline-primary\" block>注册</b-button>\n      </b-form-group>\n      </b-form>\n      </b-card>\n        </b-col>\n      </b-row>\n  </div>\n</template>\n<script>\nimport { required, minLength } from 'vuelidate/lib/validators';\nimport customValidator from '@/helper/validator';\nimport storageService from '@/service/storageService';\nimport userService from '@/service/userService';\nexport default {\n  data() {\n    return {\n      user: {\n        name: '',\n        telephone: '',\n        password: '',\n      },\n      validation: null,\n    };\n  },\n  validations: {\n    user: {\n      name: {\n\n      },\n      telephone: {\n        required,\n        telephone: customValidator.telephoneValidator,\n      },\n      password: {\n        required,\n        minLength: minLength(6),\n      },\n    },\n  },\n\n  methods: {\n    validationState(name) {\n      // 这里是es6 机构赋值\n      const {$dirty, $error} = this.$v.user[name];\n      return $dirty ? !$error : null;\n    }, \n    register() {\n      // 验证数据\n      this.$v.user.$touch();\n      if (this.$v.user.$anyError) {\n        return;\n      }\n      // 请求api\n      userService.register(this.user).then((res) => {\n        // 保存token\n        this.$store.commit('userModule/SET_TOKEN', token);\n        storageService.set(storageService.USER_TOKEN, res.data.data.token);\n        userService.info().then((response) => {\n          //保存用户信息\n          storageService.set(storageService.USER_INFO, JSON.stringify(response.data.data.user));\n          // 跳转主页\n          this.$router.replace({ name: 'home' });\n        });\n      }).catch((err) => {\n        this.$bvToast.toast(err.response.data.msg, {\n          title: '数据验证错误',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n      console.log('register');\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}